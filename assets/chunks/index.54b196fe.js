import{_ as l,h as s,o as a,c}from"../app.f349424a.js";var h=Object.defineProperty,d=(n,t,e)=>t in n?h(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,r=(n,t,e)=>(d(n,typeof t!="symbol"?t+"":t,e),e);const b=n=>(Object.prototype.toString.call(n)!=="[object Object]"&&(n={}),{list:[],tableBg:"",skew:!1,onend:null,onsubmit:null,...n});class u{constructor(t){if(r(this,"element",null),r(this,"options",{}),r(this,"drawing",!1),r(this,"deg",0),r(this,"prizeIndex",0),r(this,"isFirstMove",!0),r(this,"listLength",0),r(this,"rotateDeg",0),r(this,"turntable__table",null),!t.element||typeof t.element!="string"){console.error("SlotMachine init error: The variable type of 'element' should be a string");return}if(!t.list||Object.prototype.toString.call(t.list)!=="[object Array]"){console.error("SlotMachine init error: The variable type of 'list' should be an array");return}if(!t.tableBg){console.error("SlotMachine init error: The tableBg field cannot be null");return}if(!t.tableBtn){console.error("SlotMachine init error: The tableBtn field cannot be null");return}this.options=b(t);const e=this.options.list.length;if(this.listLength=e,this.rotateDeg=Number((360/e).toFixed(2)),this.options.skew&&(this.deg=-1*Math.floor(this.rotateDeg/2)),t.element.indexOf("#")===0?this.element=document.getElementById(t.element):t.element.indexOf(".")===0&&(this.element=document.querySelector(t.element)),!this.element){console.error("lottery init error: Unable to get dom element: "+t.element);return}this.element.appendChild(this.createHtml())}createHtml(){const t=document.createElement("div");t.className="turntable";const e=document.createElement("div");e.className="turntable__table",e.style=`transform: rotate(${this.deg}deg); background-image: url('${this.options.tableBg}');`,this.turntable__table=e;const o=document.createElement("div");o.className="turntable__btn",o.style=`background-image: url('${this.options.tableBtn}');`;const i=this;return o.onclick=function(){typeof i.options.onsubmit=="function"&&i.options.onsubmit()},t.appendChild(e),t.appendChild(o),t}start(){this.drawing?this.turntable__table.className="turntable__table move":this.turntable__table.className="turntable__table",this.turntable__table.style=`transform: rotate(${this.deg}deg); background-image: url('${this.options.tableBg}');`}go(t){let e=Number(t)+1;if(!e){console.warn("Turntable go error: The parameter type should be Number");return}if(e>=this.listLength){console.warn(`Turntable go error: Parameter values should be between 0 and ${this.options.list.length-1}`);return}this.drawing||(this.drawing=!0,this.deg=this.deg+360*6+(360-(e-this.prizeIndex)*this.rotateDeg),this.isFirstMove&&(this.deg+=Math.floor(this.rotateDeg/2),this.isFirstMove=!1),this.prizeIndex=e,this.start(),setTimeout(()=>{this.drawing=!1,this.start();const o=this.options.list[t];typeof this.options.onend=="function"&&this.options.onend(o)},6e3))}}(function(){try{if(typeof document<"u"){var n=document.createElement("style");n.appendChild(document.createTextNode(".turntable{position:relative;width:430px;height:430px;overflow:hidden}.turntable__table{width:100%;height:100%;background-repeat:no-repeat;background-size:100% 100%;transform:rotate(0);flex-shrink:0}.turntable__table.move{transition:transform 6s cubic-bezier(.42,0,.66,1.09)}.turntable__btn{width:100px;height:138px;position:absolute;background-size:100% 100%;z-index:3;top:50%;left:50%;transform:translate(-50%,-50%);cursor:pointer}")),document.head.appendChild(n)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();const m={class:"lottery"},p={__name:"index",setup(n){const t=[{label:"\u534E\u4E3AMate 60 Pro+"},{label:"1000\u5143\u73B0\u91D1\u7EA2\u5305"},{label:"\u4E09\u7B49\u5956"},{label:"500\u5143\u73B0\u91D1\u7EA2\u5305"},{label:"\u8C22\u8C22\u53C2\u4E0E"},{label:"\u516D\u7B49\u5956"}];return s(()=>{const e=new u({element:".lottery",list:t,tableBg:"/lattice-lottery-new/tableBg.png",tableBtn:"/lattice-lottery-new/tableBtn.png",onend:o=>{alert(o.label)},onsubmit:()=>{e.go(2)}})}),(e,o)=>(a(),c("div",m))}},_=l(p,[["__scopeId","data-v-1cd3f56d"]]);export{_ as default};
